<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>消息订阅发布</title>
    <script src="../src/index.js"></script>
</head>

<body>
    <script>
        //订阅一个频道，一个消息由多个角色接收到（商家和骑手）
        //pid 接收返回的唯一id
        let pid = PubSub.subscribe('pay', data => {
            console.log('商家接到了订单，准备开始制作', data);
        });
        let pid2 = PubSub.subscribe('pay', data => {
            console.log('骑手接到了订单，准备开始取餐', data);
        });

        // console.log(pid, pid2);
        //接收到cancel，就执行对应的回调
        PubSub.subscribe('cancel', data => {
            console.log('商家接到取消的请求', data);
        });

        //取消订阅
        // PubSub.unsubscribe('token_1');
        // console.log(PubSub);

        //发布消息
        PubSub.publish('pay', {
            title: '鱼香肉丝饭',
            price: 28,
            pos: '三年二班'
        });


    </script>
</body>

</html>